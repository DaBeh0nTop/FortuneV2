<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fortune Cookie</title>
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
<style>
  :root {
    --funny: #ffd700; --inspiring: #87ceeb; --unlucky: #4a4a4a; --lucky: #008000;
    --sarcasm: #800080; --beware: #ff0000; --uplifting: #20b2aa; --lovely: #ff69b4; --hugot: #b22222; --dabeh: #ff4500;
    --cookie-shadow: #e0ac69; --background-gradient-start: #f5f5dc; --background-gradient-end: #f0e68c;
  }
  body {
    font-family: "Comfortaa", cursive; display: flex; justify-content: center; align-items: center;
    min-height: 100vh; margin: 0; background: linear-gradient(135deg, var(--background-gradient-start), var(--background-gradient-end));
    background-image: radial-gradient(circle at 20% 20%, rgba(255 255 255 / 0.15) 2px, transparent 3px),
                     radial-gradient(circle at 80% 80%, rgba(255 255 255 / 0.15) 2px, transparent 3px);
    background-size: 100px 100px; text-align: center; overflow: hidden; user-select: none;
  }
  .container { display: flex; flex-direction: column; align-items: center; position: relative; z-index: 2; padding: 20px; }
  .cookie { width: 250px; cursor: pointer; transition: transform 0.3s ease-in-out; filter: drop-shadow(5px 5px 5px var(--cookie-shadow)); transform-origin: center bottom; }
  .cookie:hover { transform: scale(1.05); }
  .cookie.snap-open { animation: snapOpen 0.6s forwards; }
  @keyframes snapOpen { 0% { transform: scale(1) rotate(0deg); } 40% { transform: scale(1.1) rotate(-15deg); } 70% { transform: scale(1.05) rotate(10deg); } 100% { transform: scale(1) rotate(0deg); } }
  .shake { animation: shake 0.5s cubic-bezier(0.36,0.07,0.19,0.97) both; transform: translate3d(0,0,0); backface-visibility: hidden; perspective:1000px; }
  @keyframes shake { 10%,90%{transform:translate3d(-1px,0,0);} 20%,80%{transform:translate3d(2px,0,0);} 30%,50%,70%{transform:translate3d(-4px,0,0);} 40%,60%{transform:translate3d(4px,0,0);} }
  .fortune-card {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.5);
    opacity: 0; visibility: hidden; background: rgba(255 255 255 / 0.15); border-radius: 20px; padding: 30px 40px;
    max-width: 400px; width: 90%; text-align: center; backdrop-filter: blur(15px); transition: transform 0.5s ease-out, opacity 0.5s ease-out, border-color 0.3s ease;
    z-index: 10; border: 4px solid transparent; user-select: none; position: relative;
  }
  .fortune-card.show { transform: translate(-50%, -50%) scale(1); opacity:1; visibility: visible; }
  .category-badge { font-family:"Poppins",sans-serif;font-weight:700;color:white;padding:8px 20px;border-radius:50px;text-transform:uppercase;font-size:0.85em;margin-bottom:15px;display:inline-block;box-shadow:0 3px 8px rgba(0 0 0 / 0.2); }
  .fortune-text { font-size:1.5em;font-weight:400;line-height:1.6;margin-bottom:20px;color:#222; }
  .close-btn { margin-top:10px; padding:5px 10px; border:none; border-radius:5px; cursor:pointer; font-weight:700; background:#333; color:#fff; }
</style>
</head>
<body>
  <div class="container">
    <img src="https://i.postimg.cc/NfQMp3Gx/image-removebg-preview.png" alt="Fortune Cookie" class="cookie" draggable="false"/>
  </div>

  <div class="fortune-card" role="dialog" aria-modal="true" aria-hidden="true" tabindex="0">
    <div class="category-badge" id="category-badge"></div>
    <p class="fortune-text" id="fortune-text"></p>
    <button class="close-btn" id="close-btn">X Close</button>
  </div>

  <script>
    let fortunes = [];
    let available = [];
    let cooldown = false;
    const categoryColors = {
      funny:"#FFD700", inspiring:"#87CEEB", unlucky:"#4A4A4A", lucky:"#008000",
      sarcasm:"#800080", beware:"#FF0000", uplifting:"#20B2AA", lovely:"#FF69B4", hugot:"#B22222", dabeh:"#FF4500"
    };

    const cookie = document.querySelector(".cookie");
    const fortuneCard = document.querySelector(".fortune-card");
    const categoryBadge = document.getElementById("category-badge");
    const fortuneText = document.getElementById("fortune-text");
    const closeBtn = document.getElementById("close-btn");

    fetch("fortunes.json")
      .then(res => res.json())
      .then(data => {
        fortunes = data;
        available = shuffle([...fortunes]);
      });

    function shuffle(array){ for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];} return array;}

    function getFortune(){
      if(available.length===0){ available=shuffle([...fortunes]); }
      return available.pop();
    }

    function getEmoji(category){
      switch(category){
        case"funny":return"😂";case"inspiring":return"✨";case"unlucky":return"😬";case"lucky":return"🍀";case"sarcasm":return"🙃";
        case"beware":return"⚠️";case"uplifting":return"🌈";case"lovely":return"💕";case"hugot":return"💔";case"dabeh":return"🛑";default:return"";}}

    function displayFortune(){
      const fortune=getFortune();
      categoryBadge.textContent = fortune.category.toUpperCase()+" "+getEmoji(fortune.category);
      categoryBadge.style.backgroundColor = categoryColors[fortune.category] || "#333";
      fortuneText.textContent = fortune.text;
      fortuneCard.classList.add("show");
      fortuneCard.setAttribute("aria-hidden","false");
    }

    cookie.addEventListener("click", ()=>{
      if(cooldown)return;
      cookie.classList.add("shake","snap-open");
      setTimeout(()=>{cookie.classList.remove("shake","snap-open"); displayFortune(); cooldown=true; setTimeout(()=>{cooldown=false;},500); },600);
    });

    closeBtn.addEventListener("click", ()=>{
      fortuneCard.classList.remove("show");
      fortuneCard.setAttribute("aria-hidden","true");
    });
  </script>
</body>
</html>
